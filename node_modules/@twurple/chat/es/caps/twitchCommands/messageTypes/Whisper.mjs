import { __decorate } from "tslib";
import { parseChatMessage } from '@twurple/common';
import { Message, MessageParamDefinition, MessageType } from 'ircv3';
import { ChatUser } from "../../../ChatUser.mjs";
import { parseEmoteOffsets } from "../../../utils/emoteUtil.mjs";
import { getMessageText } from "../../../utils/messageUtil.mjs";
/** @private */
let Whisper = class Whisper extends Message {
    get userInfo() {
        return new ChatUser(this._prefix.nick, this._tags);
    }
    get emoteOffsets() {
        return parseEmoteOffsets(this._tags.get('emotes'));
    }
    parseEmotes() {
        const messageText = getMessageText(this.params.message);
        return parseChatMessage(messageText, this.emoteOffsets);
    }
};
__decorate([
    MessageParamDefinition()
], Whisper.prototype, "target", void 0);
__decorate([
    MessageParamDefinition({
        trailing: true
    })
], Whisper.prototype, "message", void 0);
Whisper = __decorate([
    MessageType('WHISPER')
], Whisper);
export { Whisper };
